<meta charset="UTF-8">
<title>TAF Route Optimizer - Ottimizzatore di Percorsi TAF 2025

TAF Route Optimizer - Ottimizzatore di Percorsi TAF 2025

Aggiungi Punto

<button id="aggiungi-punto">Aggiungi Punto

Importa Punti
<button id="ottimizza-percorso">Ottimizza Percorso
const mappa = L.map('map').setView([41.9028, 12.4964], 6); // Centro in Italia
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19 }).addTo(mappa);

const punti = [];

document.getElementById("aggiungi-punto").addEventListener("click", () => {
const nome = document.getElementById("nome").value;
const lat = parseFloat(document.getElementById("latitude").value);
const lng = parseFloat(document.getElementById("longitude").value);

if (nome && !isNaN(lat) && !isNaN(lng)) {
const punto = { nome, lat, lng };
punti.push(punto);
L.marker([lat, lng]).addTo(mappa).bindPopup(nome);
creaListaPunti(punti);
} else {
alert("Inserisci dati validi");
}
});

function creaListaPunti(puntiOttimizzati) {
const listaPunti = document.getElementById("lista-punti");
listaPunti.innerHTML = ""; // Svuota la lista precedente

puntiOttimizzati.forEach(punto => {
const li = document.createElement("li");
li.innerHTML = ${punto.nome}| Apri in Waze;
listaPunti.appendChild(li);
});
}

document.getElementById("file-input").addEventListener("change", (event) => {
const file = event.target.files[0];
const reader = new FileReader();

reader.onload = (e) => {
const data = new Uint8Array(e.target.result);
const workbook = XLSX.read(data, { type: 'array' });

const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
const json = XLSX.utils.sheet_to_json(firstSheet);

json.forEach(punto => {
const lat = parseFloat(punto.Latitudine);
const lng = parseFloat(punto.Longitudine);
const nome = punto.Nome;

if (nome && !isNaN(lat) && !isNaN(lng)) {
const nuovoPunto = { nome, lat, lng };
punti.push(nuovoPunto);
L.marker([lat, lng]).addTo(mappa).bindPopup(nome);
}
});

creaListaPunti(punti);
};
reader.readAsArrayBuffer(file);
});

document.getElementById("ottimizza-percorso").addEventListener("click", () => {
// Implementa l'algoritmo di ottimizzazione qui
// Per il momento simuleremo l'ordinamento per esempio:
const puntiOttimizzati = punti.sort((a, b) => a.nome.localeCompare(b.nome));
creaListaPunti(puntiOttimizzati); // Crea la lista ordinata per nome
alert("Percorso ottimizzato!");
});
</script>